/**
 * browser-bunyan - 0.4.0
 * A fork of Bunyan specifically for the browser
 * MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.bunyan=e()}}(function(){return function e(r,t,i){function s(o,a){if(!t[o]){if(!r[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[o]={exports:{}};r[o][0].call(f.exports,function(e){var t=r[o][1][e];return s(t?t:e)},f,f.exports,e,r,t,i)}return t[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,r,t){"use strict";function i(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function s(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(y)>=0&&t.shift();var i=t[r],s=null;if(i){var n=/^\s*(at|.*@)\s*(.+)?$/.exec(i);s=Array.isArray(n)&&n[2]?n[2]:i}return s}function n(e,r){r||(r="    ");var t=e.split(/\r?\n/g);return r+t.join("\n"+r)}function o(e,r){if(r){if(b[r])return;b[r]=!0}console.error(e+"\n")}function a(e){return b[e]}function l(){}function c(){}function f(e){var r="string"==typeof e?k[e.toLowerCase()]:e;return r}function u(e,r,t){if(!(this instanceof u))return new u(e,r);var s;if(void 0!==r&&(s=e,e=r,!(s instanceof u)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(s){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var n,o,a;if(s&&t){this._isSimpleChild=!0,this._level=s._level,this.streams=s.streams,this.serializers=s.serializers,this.src=s.src,n=this.fields={};var c=Object.keys(s.fields);for(a=0;a<c.length;a++)o=c[a],n[o]=s.fields[o];var f=Object.keys(e);for(a=0;a<f.length;a++)o=f[a],n[o]=e[o]}else{var p=this;if(s){for(this._level=s._level,this.streams=[],a=0;a<s.streams.length;a++){var v=i(s.streams[a]);v.closeOnExit=!1,this.streams.push(v)}this.serializers=i(s.serializers),this.src=s.src,this.fields=i(s.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?p.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(r){p.addStream(r,e.level)}):s&&e.level?this.level(e.level):s||p.addStream({type:"raw",stream:new l,closeOnExit:!1,level:e.level}),e.serializers&&p.addSerializers(e.serializers),e.src&&(this.src=!0),n=i(e),delete n.stream,delete n.level,delete n.streams,delete n.serializers,delete n.src,this.serializers&&this._applySerializers(n),Object.keys(n).forEach(function(e){p.fields[e]=n[e]})}}function p(e){return function(){function r(r){var c;r[0]instanceof Error?(n={err:t.serializers&&t.serializers.err?t.serializers.err(r[0]):u.stdSerializers.err(r[0])},c={err:!0},l=1===r.length?[n.err.message]:Array.prototype.slice.call(r,1)):"object"!=typeof r[0]&&null!==r[0]||Array.isArray(r[0])?(n=null,l=Array.prototype.slice.call(r)):(n=r[0],l=1===r.length&&n.err&&n.err instanceof Error?[n.err.message]:Array.prototype.slice.call(r,1));var f=i(t.fields);f.level=e;var p=n?i(n):null;if(p&&(t.serializers&&t._applySerializers(p,c),Object.keys(p).forEach(function(e){f[e]=p[e]})),f.levelName=N[e],f.msg=l.length?w.apply(t,l):"",f.time||(f.time=new Date),t.src&&!f.src)try{throw new Error(y)}catch(v){var h=s(v.stack,2);h||a("src")||o("Unable to determine src line info","src"),f.src=h||""}return f.v=m,f}var t=this,n=null,l=arguments,c=null;return 0===arguments.length?this._level<=e:void(this._level>e||(c=r(l),this._emit(c)))}}function v(e){var r=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var t=e.cause();t&&(r+="\nCaused by: "+v(t))}return r}function h(){var e=[];return function(r,t){return t&&"object"==typeof t?e.indexOf(t)!==-1?"[Circular]":(e.push(t),t):t}}var d="0.4.0",m=0,y="call-stack-error",g=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(Array.isArray(e)){var r=e.map(function(e){return g(e)});return"[ "+r.join(", ")+" ]"}return"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"},w=function(e){if("string"!=typeof e){for(var r=new Array(arguments.length),t=0;t<arguments.length;t++)r[t]=g(arguments[t]);return r.join(" ")}for(var i=/%[sdj%]/g,s=1,n=arguments,o=n.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(s>=o)return e;switch(e){case"%s":return String(n[s++]);case"%d":return Number(n[s++]);case"%j":try{return JSON.stringify(n[s++])}catch(r){return"[Circular]"}break;default:return e}}),l=n[s];s<o;l=n[++s])a+=" "+l;return a},b={};l.prototype.write=function(e){e.level<x?console.log(e):e.level<z?console.info(e):e.level<O?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)},c.prototype.write=function(e){function r(e,r){return Array(r+1-(e+"").length).join("0")+e}var t,i="color: DimGray",s="color: SteelBlue",n="color: DimGray; font-style: italic; font-size: 0.9em";t=e.level<S?"color: DeepPink":e.level<x?"color: GoldenRod":e.level<z?"color: DarkTurquoise":e.level<O?"color: Purple":e.level<j?"color: Crimson":"color: Black";var o=e.childName?e.name+"/"+e.childName:e.name,a=N[e.level].toUpperCase();a=Array(6-a.length).join(" ")+a,console.log("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s",r(e.time.getHours(),2),r(e.time.getMinutes(),2),r(e.time.getSeconds(),2),r(e.time.getMilliseconds(),4),t,a,i,o,s,e.msg,n,e.src||""),e.err&&e.err.stack&&console.log("%c%s,",t,e.err.stack),e.obj&&console.log(e.obj)};var E=10,S=20,x=30,z=40,O=50,j=60,k={trace:E,debug:S,info:x,warn:z,error:O,fatal:j},N={};Object.keys(k).forEach(function(e){N[k[e]]=e}),u.prototype.addStream=function(e,r){var t=this;null!==r&&void 0!==r||(r=x),e=i(e),e.type="raw",e.level?e.level=f(e.level):e.level=f(r),e.level<t._level&&(t._level=e.level),e.closeOnExit||(e.closeOnExit=!1),t.streams.push(e),delete t.haveNonRawStreams},u.prototype.addSerializers=function(e){var r=this;r.serializers||(r.serializers={}),Object.keys(e).forEach(function(t){var i=e[t];if("function"!=typeof i)throw new TypeError(w('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=i})},u.prototype.child=function(e,r){return new this.constructor(this,e||{},r)},u.prototype.level=function(e){if(void 0===e)return this._level;for(var r=f(e),t=this.streams.length,i=0;i<t;i++)this.streams[i].level=r;this._level=r},u.prototype.levels=function(e,r){if(void 0===e)return this.streams.map(function(e){return e.level});var t;if("number"==typeof e){if(t=this.streams[e],void 0===t)throw new Error("invalid stream index: "+e)}else{for(var i=this.streams.length,s=0;s<i;s++){var n=this.streams[s];if(n.name===e){t=n;break}}if(!t)throw new Error(w('no stream with name "%s"',e))}if(void 0===r)return t.level;var o=f(r);t.level=o,o<this._level&&(this._level=o)},u.prototype._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(i){if(!(void 0===e[i]||r&&r[i]))try{e[i]=t.serializers[i](e[i])}catch(s){o(w('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',i,s.stack||s)),e[i]=w('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',i)}})},u.prototype._emit=function(e,r){var t;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}var i;if(r||this.haveNonRawStreams)try{i=JSON.stringify(e,h())+"\n"}catch(s){var a=s.stack.split(/\n/g,2).join("\n");o('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+n(w("%s\n%s",e,s.stack)),a),i=w("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",s.message)}if(r)return i;var l=e.level;for(t=0;t<this.streams.length;t++){var c=this.streams[t];c.level<=l&&c.stream.write(e)}return i},u.prototype.trace=p(E),u.prototype.debug=p(S),u.prototype.info=p(x),u.prototype.warn=p(z),u.prototype.error=p(O),u.prototype.fatal=p(j),u.stdSerializers={},u.stdSerializers.err=function(e){if(!e||!e.stack)return e;var r={message:e.message,name:e.name,stack:v(e),code:e.code,signal:e.signal};return r},r.exports=u,r.exports.TRACE=E,r.exports.DEBUG=S,r.exports.INFO=x,r.exports.WARN=z,r.exports.ERROR=O,r.exports.FATAL=j,r.exports.resolveLevel=f,r.exports.levelFromName=k,r.exports.nameFromLevel=N,r.exports.VERSION=d,r.exports.LOG_VERSION=m,r.exports.createLogger=function(e){return new u(e)},r.exports.safeCycles=h,r.exports.ConsoleFormattedStream=c,r.exports.ConsoleRawStream=l},{}]},{},[1])(1)});