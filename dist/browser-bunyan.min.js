/**
 * browser-bunyan - 0.3.0
 * A fork of Bunyan specifically for the browser
 * MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.bunyan=e()}}(function(){return function e(r,t,s){function i(o,a){if(!t[o]){if(!r[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[o]={exports:{}};r[o][0].call(f.exports,function(e){var t=r[o][1][e];return i(t?t:e)},f,f.exports,e,r,t,s)}return t[o].exports}for(var n="function"==typeof require&&require,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(e,r,t){"use strict";function s(e){if("undefined"==typeof e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function i(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(y)>=0&&t.shift();var s=t[r],i=null;if(s){var n=/^\s*(at|.*@)\s*(.+)?$/.exec(s);i=Array.isArray(n)&&n[2]?n[2]:s}return i}function n(e,r){r||(r="    ");var t=e.split(/\r?\n/g);return r+t.join("\n"+r)}function o(e,r){if(r){if(g[r])return;g[r]=!0}console.error(e+"\n")}function a(e){return g[e]}function l(){}function c(){}function f(e){var r="string"==typeof e?k[e.toLowerCase()]:e;return r}function u(e,r,t){if(!(this instanceof u))return new u(e,r);var i;if(void 0!==r&&(i=e,e=r,!(i instanceof u)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!e)throw new TypeError("options (object) is required");if(i){if(e.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!e.name)throw new TypeError("options.name (string) is required");if(e.stream&&e.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(e.streams&&!Array.isArray(e.streams))throw new TypeError("invalid options.streams: must be an array");if(e.serializers&&("object"!=typeof e.serializers||Array.isArray(e.serializers)))throw new TypeError("invalid options.serializers: must be an object");var n,o,a;if(i&&t){this._isSimpleChild=!0,this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,n=this.fields={};var c=Object.keys(i.fields);for(a=0;a<c.length;a++)o=c[a],n[o]=i.fields[o];var f=Object.keys(e);for(a=0;a<f.length;a++)o=f[a],n[o]=e[o]}else{var p=this;if(i){for(this._level=i._level,this.streams=[],a=0;a<i.streams.length;a++){var v=s(i.streams[a]);v.closeOnExit=!1,this.streams.push(v)}this.serializers=s(i.serializers),this.src=i.src,this.fields=s(i.fields),e.level&&this.level(e.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};e.stream?p.addStream({type:"stream",stream:e.stream,closeOnExit:!1,level:e.level}):e.streams?e.streams.forEach(function(r){p.addStream(r,e.level)}):i&&e.level?this.level(e.level):i||p.addStream({type:"raw",stream:new l,closeOnExit:!1,level:e.level}),e.serializers&&p.addSerializers(e.serializers),e.src&&(this.src=!0),n=s(e),delete n.stream,delete n.level,delete n.streams,delete n.serializers,delete n.src,this.serializers&&this._applySerializers(n),Object.keys(n).forEach(function(e){p.fields[e]=n[e]})}}function p(e){return function(){function r(r){var c;r[0]instanceof Error?(n={err:t.serializers&&t.serializers.err?t.serializers.err(r[0]):u.stdSerializers.err(r[0])},c={err:!0},l=1===r.length?[n.err.message]:Array.prototype.slice.call(r,1)):"object"!=typeof r[0]&&null!==r[0]||Array.isArray(r[0])?(n=null,l=Array.prototype.slice.call(r)):(n=r[0],l=Array.prototype.slice.call(r,1));var f=s(t.fields);f.level=e;var p=n?s(n):null;if(p&&(t.serializers&&t._applySerializers(p,c),Object.keys(p).forEach(function(e){f[e]=p[e]})),f.levelName=j[e],f.msg=w.apply(t,l),f.time||(f.time=new Date),t.src&&!f.src){var v=i(new Error(y).stack,2);v||a("src")||o("Unable to determine src line info","src"),f.src=v||""}return f.v=d,f}var t=this,n=null,l=arguments,c=null;return 0===arguments.length?this._level<=e:void(this._level>e||(c=r(l),this._emit(c)))}}function v(e){var r=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var t=e.cause();t&&(r+="\nCaused by: "+v(t))}return r}function h(){var e=[];return function(r,t){return t&&"object"==typeof t?e.indexOf(t)!==-1?"[Circular]":(e.push(t),t):t}}var m="0.2.3",d=0,y="call-stack-error",w=function(e){if(null===e)return"null";if("string"!=typeof e)return e.toString();for(var r=/%[sdj%]/g,t=1,s=arguments,i=s.length,n=String(e).replace(r,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(s[t++]);case"%d":return Number(s[t++]);case"%j":try{return JSON.stringify(s[t++])}catch(r){return"[Circular]"}break;default:return e}}),o=s[t];t<i;o=s[++t])n+=" "+o;return n},g={};l.prototype.write=function(e){e.level<x?console.log(e):e.level<z?console.info(e):e.level<S?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack)},c.prototype.write=function(e){function r(e,r){return Array(r+1-(e+"").length).join("0")+e}var t,s="color: DimGray",i="color: SteelBlue",n="color: DimGray; font-style: italic; font-size: 0.9em";t=e.level<b?"color: DeepPink":e.level<x?"color: GoldenRod":e.level<z?"color: DarkTurquoise":e.level<S?"color: Purple":e.level<O?"color: Crimson":"color: Black";var o=e.childName?e.name+"/"+e.childName:e.name,a=j[e.level].toUpperCase();a=Array(6-a.length).join(" ")+a,console.log("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s",r(e.time.getHours(),2),r(e.time.getMinutes(),2),r(e.time.getSeconds(),2),r(e.time.getMilliseconds(),4),t,a,s,o,i,e.msg,n,e.src||""),e.err&&e.err.stack&&console.log("%c%s,",t,e.err.stack)};var E=10,b=20,x=30,z=40,S=50,O=60,k={trace:E,debug:b,info:x,warn:z,error:S,fatal:O},j={};Object.keys(k).forEach(function(e){j[k[e]]=e}),u.prototype.addStream=function(e,r){var t=this;switch(null!==r&&void 0!==r||(r=x),e=s(e),!e.type&&e.stream&&(e.type="raw"),e.raw="raw"===e.type,e.level?e.level=f(e.level):e.level=f(r),e.level<t._level&&(t._level=e.level),e.type){case"stream":e.closeOnExit||(e.closeOnExit=!1);break;case"raw":e.closeOnExit||(e.closeOnExit=!1);break;default:throw new TypeError('unknown stream type "'+e.type+'"')}t.streams.push(e),delete t.haveNonRawStreams},u.prototype.addSerializers=function(e){var r=this;r.serializers||(r.serializers={}),Object.keys(e).forEach(function(t){var s=e[t];if("function"!=typeof s)throw new TypeError(w('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=s})},u.prototype.child=function(e,r){return new this.constructor(this,e||{},r)},u.prototype.level=function(e){if(void 0===e)return this._level;for(var r=f(e),t=this.streams.length,s=0;s<t;s++)this.streams[s].level=r;this._level=r},u.prototype.levels=function(e,r){if(void 0===e)return this.streams.map(function(e){return e.level});var t;if("number"==typeof e){if(t=this.streams[e],void 0===t)throw new Error("invalid stream index: "+e)}else{for(var s=this.streams.length,i=0;i<s;i++){var n=this.streams[i];if(n.name===e){t=n;break}}if(!t)throw new Error(w('no stream with name "%s"',e))}if(void 0===r)return t.level;var o=f(r);t.level=o,o<this._level&&(this._level=o)},u.prototype._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(s){if(!(void 0===e[s]||r&&r[s]))try{e[s]=t.serializers[s](e[s])}catch(i){o(w('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',s,i.stack||i)),e[s]=w('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',s)}})},u.prototype._emit=function(e,r){var t;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}var s;if(r||this.haveNonRawStreams)try{s=JSON.stringify(e,h())+"\n"}catch(i){var a=i.stack.split(/\n/g,2).join("\n");o('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+n(w("%s\n%s",e,i.stack)),a),s=w("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",i.message)}if(r)return s;var l=e.level;for(t=0;t<this.streams.length;t++){var c=this.streams[t];c.level<=l&&c.stream.write(c.raw?e:s)}return s},u.prototype.trace=p(E),u.prototype.debug=p(b),u.prototype.info=p(x),u.prototype.warn=p(z),u.prototype.error=p(S),u.prototype.fatal=p(O),u.stdSerializers={},u.stdSerializers.err=function(e){if(!e||!e.stack)return e;var r={message:e.message,name:e.name,stack:v(e),code:e.code,signal:e.signal};return r},r.exports=u,r.exports.TRACE=E,r.exports.DEBUG=b,r.exports.INFO=x,r.exports.WARN=z,r.exports.ERROR=S,r.exports.FATAL=O,r.exports.resolveLevel=f,r.exports.levelFromName=k,r.exports.nameFromLevel=j,r.exports.VERSION=m,r.exports.LOG_VERSION=d,r.exports.createLogger=function(e){return new u(e)},r.exports.safeCycles=h,r.exports.ConsoleFormattedStream=c,r.exports.ConsoleRawStream=l},{}]},{},[1])(1)});